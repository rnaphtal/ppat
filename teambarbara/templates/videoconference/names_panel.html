<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Team Barbara</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css">
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
  <link rel="stylesheet" href="/resources/demos/style.css">
  <style>
  /* style the list to maximize the droppable hitarea */
  .groups ol { margin: 0; padding: 2em 0 2em 3em; }
  </style>
  <script>
  $(function() {
    $( "#grouping" ).accordion({
        collapsible:true,
        beforeActivate: function(event, ui) {
             // The accordion believes a panel is being opened
            if (ui.newHeader[0]) {
                var currHeader  = ui.newHeader;
                var currContent = currHeader.next('.ui-accordion-content');
             // The accordion believes a panel is being closed
            } else {
                var currHeader  = ui.oldHeader;
                var currContent = currHeader.next('.ui-accordion-content');
            }
            //Since we've changed the default behavior, this detects the actual status
            var isPanelSelected= currHeader.attr('aria-selected') == 'true';
            
            //Toggle the panel's header
            currHeader.toggleClass('ui-corner-all',isPanelSelected)
            .toggleClass('accordion-header-active ui-state-active ui-corner-top',!isPanelSelected)
            .attr('aria-selected',((!isPanelSelected).toString()));
            
            //Toggle the panel's icon
            currHeader.children('.ui-icon')
            .toggleClass('ui-icon-triangle-1-e',isPanelSelected)
            .toggleClass('ui-icon-triangle-1-s',!isPanelSelected);
            
            //Toggle the panel's content
            currContent.toggleClass('accordion-content-active',!isPanelSelected)
            if (isPanelSelected) {currContent.slideUp(); } else { currContent.slideDown(); }
            
            return false; //Cancels default action
            }
            });
    $( "#people li" ).draggable({
      appendTo: "body",
      helper: "clone"
    });
    $( ".groups ol" ).droppable({
      activeClass: "ui-state-default",
      hoverClass: "ui-state-hover",
      accept: ":not(.ui-sortable-helper)",
      drop: function( event, ui ) {
        $( this ).find( ".placeholder" ).remove();
        $( "<li></li>" ).text( ui.draggable.text() ).appendTo( this );
      }
    }).sortable({
      items: "li:not(.placeholder)",
      sort: function() {
        // gets added unintentionally by droppable interacting with sortable
        // using connectWithSortable fixes this, but doesn't allow you to customize active/hoverClass options
        $( this ).removeClass( "ui-state-default" );
      }
    });
  });
  $(function() {
    $("button").button()
    .click(function(e){
        e.stopPropagation();
        });
    });
  $(function() {
    $("#groupButton").click(function() {
        var newAccordion='<h4>New Group<button>show</button></h4><div><ol><li class="placeholder">Add individuals here</li></ol>'
        $("#grouping").append(newAccordion).accordion("refresh").accordion();
        });
  });
  </script>
</head>
<body>

<div id="groupButton">
<button> New Group </button>
</div>

<div class="groups">
  <div id="grouping">
    <h4><a href="#">Individuals</a></h4>
    <div id="people">
      <ul>
        {% for user in others %}
        <li id="{{user.name}}" class="ui-widgit-content">
        <button>{{user.name}}</button>
        </li>
        {% endfor %}
        <li><button>Barbara</button></li>
        <li><button>Charlotte</button></li>
        <li><button>Jing</button></li>
        <li><button>Rachael</button></li>
      </ul>
    </div>
    <h4>Group 1<button>show</button></h4>
    <div>
      <ol>
        <li class="placeholder">Add individuals here</li>
      </ol>
    </div>
    <h4>Group 2<button>show</button></h4>
    <div>
      <ol>
        <li class="placeholder">Add individuals here</li>
      </ol>
    </div>
    <h4>Group 3<button>show</button></h4>
    <div>
      <ol>
        <li class="placeholder">Add individuals here</li>
      </ol>
    </div>
    
  </div>
</div>
</body>
</html>